<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="SystemReview.Views.NetworkingPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ScrollViewer Padding="16">
        <StackPanel Spacing="16">
            <Grid ColumnSpacing="8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/><ColumnDefinition Width="Auto"/><ColumnDefinition Width="Auto"/><ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Button x:Name="RefreshBtn" Content="ðŸ”„ Refresh" Click="RefreshBtn_Click" Grid.Column="0" Style="{StaticResource AccentButtonStyle}"/>
                <Button Content="ðŸ“‹ Export JSON" Click="ExportJsonBtn_Click" Grid.Column="1"/>
                <Button Content="ðŸ“ Export Text" Click="ExportTextBtn_Click" Grid.Column="2"/>
                <TextBlock x:Name="StatusText" Grid.Column="3" VerticalAlignment="Center" Margin="12,0,0,0" Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"/>
            </Grid>
            <ProgressBar x:Name="LoadingBar" IsIndeterminate="True" Visibility="Collapsed"/>

            <!-- IP Config -->
            <TextBlock Text="ðŸŒ IP Configuration" Style="{StaticResource SubtitleTextBlockStyle}"/>
            <ListView x:Name="IpConfigList" SelectionMode="None" MaxHeight="300">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Spacing="8" Padding="4">
                            <TextBlock Text="{Binding Key}" FontWeight="SemiBold" Width="250"/>
                            <TextBlock Text="{Binding Value}"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <!-- Adapters -->
            <TextBlock Text="ðŸ”Œ Network Adapters" Style="{StaticResource SubtitleTextBlockStyle}"/>
            <ListView x:Name="AdapterList" SelectionMode="None" MaxHeight="250">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Grid Padding="4" ColumnSpacing="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150"/><ColumnDefinition Width="*"/><ColumnDefinition Width="80"/><ColumnDefinition Width="80"/><ColumnDefinition Width="140"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="{Binding Name}" Grid.Column="0" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding Description}" Grid.Column="1" TextTrimming="CharacterEllipsis"/>
                            <TextBlock Text="{Binding Status}" Grid.Column="2"/>
                            <TextBlock Text="{Binding Speed}" Grid.Column="3"/>
                            <TextBlock Text="{Binding MacAddress}" Grid.Column="4" FontSize="11"/>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <!-- Ping -->
            <TextBlock Text="ðŸ“¡ Ping Test" Style="{StaticResource SubtitleTextBlockStyle}"/>
            <StackPanel Orientation="Horizontal" Spacing="8">
                <TextBox x:Name="PingInput" PlaceholderText="Host or IP (e.g. 8.8.8.8)" Width="250" Text="8.8.8.8"/>
                <Button Content="Ping" Click="PingBtn_Click" Style="{StaticResource AccentButtonStyle}"/>
            </StackPanel>
            <ListView x:Name="PingList" SelectionMode="None" MaxHeight="200">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Spacing="12" Padding="4">
                            <TextBlock Text="{Binding Timestamp}" Width="100"/><TextBlock Text="{Binding Host}" Width="120"/>
                            <TextBlock Text="{Binding Status}" Width="80"/><TextBlock Text="{Binding RoundtripMs}" Width="60"/>
                            <TextBlock Text="{Binding Ttl}"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <!-- Traceroute -->
            <TextBlock Text="ðŸ›¤ï¸ Traceroute" Style="{StaticResource SubtitleTextBlockStyle}"/>
            <StackPanel Orientation="Horizontal" Spacing="8">
                <TextBox x:Name="TraceInput" PlaceholderText="Host (e.g. 8.8.8.8)" Width="250" Text="8.8.8.8"/>
                <Button Content="Trace" Click="TraceBtn_Click" Style="{StaticResource AccentButtonStyle}"/>
            </StackPanel>
            <ListView x:Name="TraceList" SelectionMode="None" MaxHeight="300">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Spacing="12" Padding="4">
                            <TextBlock Text="{Binding Hop}" Width="40"/><TextBlock Text="{Binding Address}" Width="150"/>
                            <TextBlock Text="{Binding RoundtripMs}" Width="150"/><TextBlock Text="{Binding Status}"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <!-- Port Scan -->
            <TextBlock Text="ðŸ”“ Open Ports / Connections" Style="{StaticResource SubtitleTextBlockStyle}"/>
            <Button Content="Scan Ports" Click="ScanPortsBtn_Click"/>
            <ListView x:Name="PortList" SelectionMode="None" MaxHeight="300">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Spacing="8" Padding="4">
                            <TextBlock Text="{Binding Protocol}" Width="40" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding LocalAddress}" Width="120"/><TextBlock Text="{Binding LocalPort}" Width="60"/>
                            <TextBlock Text="â†’" Width="20"/>
                            <TextBlock Text="{Binding RemoteAddress}" Width="120"/><TextBlock Text="{Binding RemotePort}" Width="60"/>
                            <TextBlock Text="{Binding State}" Width="100"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <!-- DNS -->
            <TextBlock Text="ðŸ” DNS Lookup" Style="{StaticResource SubtitleTextBlockStyle}"/>
            <StackPanel Orientation="Horizontal" Spacing="8">
                <TextBox x:Name="DnsInput" PlaceholderText="Hostname (e.g. www.microsoft.com)" Width="300" Text="www.microsoft.com"/>
                <Button Content="Lookup" Click="DnsBtn_Click" Style="{StaticResource AccentButtonStyle}"/>
            </StackPanel>
            <ListView x:Name="DnsList" SelectionMode="None" MaxHeight="150">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Spacing="12" Padding="4">
                            <TextBlock Text="{Binding HostName}" Width="200"/><TextBlock Text="{Binding AddressFamily}" Width="120"/>
                            <TextBlock Text="{Binding Address}"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <!-- Net Stats -->
            <TextBlock Text="ðŸ“Š Network Statistics" Style="{StaticResource SubtitleTextBlockStyle}"/>
            <ListView x:Name="NetStatsList" SelectionMode="None" MaxHeight="250">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Spacing="8" Padding="4">
                            <TextBlock Text="{Binding Key}" FontWeight="SemiBold" Width="280"/>
                            <TextBlock Text="{Binding Value}"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </StackPanel>
    </ScrollViewer>
</Page>